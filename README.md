fi
==

A snippet for inspecting font-family usage in a webpage.

<a href="javascript:!function(){var n=function(n){return[].slice.call(n)},t=function(n){return n.replace(/^\s+|\s+$/g,&quot;&quot;)},e=function(n){return n.replace(/\s+/g,&quot; &quot;)},o=function(n){return e(t(n))},i=4132,r=function(){return i++},u=function(t,e,o){if(&quot;function&quot;!=typeof o||o(t)){if(t.childNodes.length)for(var i=n(t.childNodes),r=0,a=i.length;a&gt;r;r++)u(i[r],e,o);&quot;function&quot;==typeof e&amp;&amp;e(t)}},a=function(n){return n.nodeType===Node.TEXT_NODE},c=function(n){if(!n||n===document.documentElement)return!0;{var t=window.getComputedStyle(n);n.parentNode}return&quot;none&quot;!==t.display&amp;&amp;&quot;hidden&quot;!==t.visibility&amp;&amp;0!==parseFloat(t.opacity)&amp;&amp;c(n.parentNode)},f={SCRIPT:!0,NOSCRIPT:!0,STYLE:!0,IFRAME:!0,OPTION:!0},l=function(n){var t=n.parentNode;return a(n)&amp;&amp;c(t)&amp;&amp;!f[t.tagName]},d={&quot;&amp;&quot;:&quot;&amp;&quot;,&quot;&lt;&quot;:&quot;&lt;&quot;,&quot;&gt;&quot;:&quot;&gt;&quot;,&#39;&quot;&#39;:&quot;&quot;&quot;,&quot;&#39;&quot;:&quot;x27;&quot;,&quot;`&quot;:&quot;x60;&quot;},p=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&amp;&amp;p.push(e);return t},h=function(n){var t=function(n){return d[n]},e=&quot;(?:&quot;+p(d).join(&quot;|&quot;)+&quot;)&quot;,o=RegExp(e),i=RegExp(e,&quot;g&quot;);return n=null==n?&quot;&quot;:&quot;&quot;+n,o.test(n)?n.replace(i,t):n},g={},s=48,y=16,m=function(){g={},u(document.body,function(n){if(l(n)){var t=o(n.nodeValue),e=t.length;if(e){var i=window.getComputedStyle(n.parentNode).fontFamily;g.hasOwnProperty(i)||(g[i]=0),g[i]+=e}}});var n=[];for(var t in g)0!==g[t]&amp;&amp;n.push({family:t,count:g[t],weight:Math.log(g[t])});return n.sort(function(n,t){return t.weight-n.weight}),n},v=function(n){var t=n[0].weight,e=n[n.length-1].weight,o=n.map(function(o){var i=1===n.length?s:(o.weight-e)/(t-e)*(s-y)+y,r=[&#39;&lt;p style=&quot;font-family: &#39;+h(o.family)+&quot;; font-size: &quot;+i+&#39;px;&quot;&gt;&#39;,o.family+&quot; (&quot;+o.count+&quot;)&quot;,&quot;&lt;/p&gt;&quot;].join(&quot;&quot;);return r}),i=document.createElement(&quot;div&quot;);i.id=r(),i.style.cssText=&quot;position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); padding: 15px 20px; line-height: 1.5; text-shadow: 1px 1px 0 #000; color: #fff; z-index: 2147483647;&quot;,i.innerHTML=o.join(&quot;&quot;),document.body.appendChild(i),i.onclick=function(){i.parentNode.removeChild(i)}};v(m())}();">Save as a bookmarklet or drag this onto your bookmark bar</a>
